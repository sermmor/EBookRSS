<html>
 <head>
 <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'/>
 </head>

 <body>
<h1>Programando en iOS: orientación del dispositivo, nivel de batería y otros datos estáticos</h1>
<span style="font-size: x-small;">Johnbo, Fri, 16 Dec 2011 07:02:34 GMT</span>

<p><img alt="Información estática de los dispositivos iOS" class="centro" id="image78270" src="images/informacion-estatica.png" /><br /> Hace poco vimos uno de los aspectos más difíciles de la iniciación a la programación en iOS, la <a href="http://www.genbetadev.com/desarrollo-aplicaciones-moviles/comenzar-a-programar-para-ios-el-cambio-de-chip-necesario">adaptación a la peculiar sintaxis de Objective-C</a>. Una vez habituados a los pasos de mensajes en lugar de las llamadas de funciones, el siguiente paso es olvidarnos de cuando trabajábamos para dispositivos fijos, con una pantalla horizontal y unos periféricos ya supuestos. Ahora tenemos en nuestras manos un <strong>dispositivo móvil</strong>, cuyas características cambiarán dependiendo de <strong>dónde y en qué posición se encuentre</strong>, y cuyas capacidades pueden variar sustancialmente dependiendo de si se trata de <strong>un iPod, un iPhone o un iPad</strong>.</p> <p>Así pues, nos interesa conocer ciertos datos sobre el dispositivo antes de asumir <strong>su tamaño, su orientación o incluso la versión de iOS</strong> instalada, ya que esto nos puede impedir utilizar ciertas funciones que hayan sido añadidas en las últimas versiones del sistema operativo móvil de Apple.</p> <p>¿Por qué se conoce a este tipo de datos como estáticos, si pueden variar? Desde la versión de iOS, que puede incrementarse cada ciertos meses, hasta la orientación del móvil, que cambiará con sólo hacer un giro de muñeca, pasando por el nombre del dispositivo, que puede modificarse cada vez que se desee desde iTunes. Sin embargo, como decíamos, todos estos campos se consideran <strong>estáticos</strong> ya que todos ellos se pueden <strong>consultar en un momento determinado</strong>, <strong>sin dependencia de datos anteriores</strong> y sabiendo que vamos a obtener un <strong>resultado concreto</strong>. Esto los diferencia de otros campos que conoceremos como dinámicos, tales como la geolocalización o la aceleración, y que veremos en un artículo futuro.<br /> <!--more--><br /> <h2>Identificación del dispositivo</h2></p> <p>Todos los datos estáticos que necesitemos conocer se encuentran definidos en el fichero <code>UIDevice.h</code>, que deberemos importar allá donde queramos consultarlo. Para poder acceder a dichos campos, habrá que instanciar un objeto que representará a nuestro dispositivo:</p> <pre class="prettyprint"> UIDevice *miDispositivo = [UIDevice currentDevice]; </pre> <p>A partir de ahí, ya podremos consultar al objeto <code>miDispositivo</code> acerca de sus propiedades. Por ejemplo, con el este código a continuación yo obtendría el siguiente resultado:</p> <pre class="prettyprint"> NSLog(&#64;"%@ es un %@ con la versión %@ de iOS", [miDispositivo name], [miDispositivo model], [miDispositivo systemVersion]); </pre> <pre class="prettyprint"> iJohnbo es un iPhone con la versión 5.0.1 de iOS </pre> <p>Entre los datos identificativos más importantes podemos destacar:</p> <ul> <li><code>name</code>, nombre dado al dispositivo por su usuario.</li> <li><code>model</code>, tipo de dispositivo que se está utilizando: iPhone, iPod touch o iPad.</li> <li><code>systemVersion</code>, versión actual del sistema operativo que se está ejecutando.</li> <li><code>uniqueIdentifier</code>, identificador único del dispositivo. A partir de iOS 5, se desaconseja el uso de esta propiedad y se recomienda que <strong>cada aplicación genere su propio identificador único</strong>, relativo únicamente a dicha aplicación e independiente del resto.</li> </ul> <h2>Nivel de batería y sensor de proximidad</h2> <p>Estas dos propiedades, presentes a partir de iOS 3.0, tiene en común la particularidad de que <strong>pueden estar desactivadas</strong>, por lo que antes de usarlas conviene repasar los valores de los booleanos <code>batteryMonitoringEnabled</code> y <code>proximityMonitoringEnabled</code>. Sólo en el caso de que su valor sea positivo podremos fiarnos de lo que leamos en las otras propiedades.</p> <p>El valor de <code>proximityState</code> también es un booleano, que valdrá verdadero cuando el usuario se encuentre cerca del sensor y falso en caso contrario. Este valor nos puede ser útil a la hora de apagar la pantalla para <strong>reducir el consumo</strong> cuando el usuario se acerque el móvil a la oreja, por ejemplo.</p> <p>En cuanto a la batería, nos ofrece dos atributos de lectura: <code>batteryState</code>, que nos indicará si el aparato se encuentra desenchufado, cargándose o cargado por completo, lo cual nos será útil a la hora de decidir si realizar o no tareas muy costosas en energía, y <code>batteryLevel</code>, que nos devolverá un número comprendido entre 0 y 1 indicando el porcentaje restante de batería que nos queda.</p> <h2>Orientación</h2> <p>La orientación de la pantalla es útil en todo de tipo de aplicaciones, ya que será la que nos indique si tiene sentido que mostremos la información en formato vertical o apaisado, por ejemplo. Una única propiedad, <code>orientation</code>, nos devolverá uno de los siguientes valores: </p> <ul> <li><code>UIDeviceOrientationUnknown</code>, posición desconocida. Este valor sólo sirve para poder devolver un dato estático en un tiempo mínimo, y supuestamente podría aparecer cuando &#8220;mareemos&#8221; mucho al dispositivo.</li> <li><code>UIDeviceOrientationPortrait</code>, orientación vertical, la más habitual.</li> <li><code>UIDeviceOrientationPortraitUpsideDown</code>, orientación vertical, pero con el botón en la parte superior.</li> <li><code>UIDeviceOrientationLandscapeLeft</code>, orientación horizontal, con el botón principal en la parte izquierda.</li> <li><code>UIDeviceOrientationLandscapeRight</code>, igual que el anterior, con el botón a la derecha.</li> <li><code>UIDeviceOrientationFaceUp</code>, con la pantalla boca arriba.</li> <li><code>UIDeviceOrientationFaceDown</code>, con la pantalla boca abajo.</li> </ul> <p>Sin embargo, dado que la orientación puede cambiar en todo momento, y sería bastante costoso tener que estar preguntando todo el rato al dispositivo hacia dónde está mirando, existe la posibilidad de <strong>generar notificaciones en el momento que se produzca un cambio</strong>, con tan solo llamar a <code>beginGeneratingDeviceOrientationNotifications</code>. </p> <p>Más información | <a href="http://developer.apple.com/library/IOs/#documentation/UIKit/Reference/UIDevice_Class/Reference/UIDevice.html">Referencia de la clase UIDevice en developers.apple.com</a></p><img border="0" height="1" src="images/1111111mf.gif" width="1" /><div class="mf-viral"><table border="0"><tr><td valign="middle"><a href="http://res.feedsportal.com/viral/sendemail2_es.html?title=Programando+en+iOS%3A+orientaci%C3%B3n+del+dispositivo%2C+nivel+de+bater%C3%ADa+y+otros+datos+est%C3%A1ticos&amp;link=http%3A%2F%2Fwww.genbetadev.com%2Fobjective-c-cocoa%2Fprogramando-en-ios-orientacion-del-dispositivo-nivel-de-bateria-y-otros-datos-estaticos" target="_blank"><img border="0" src="images/1111111emailthis2_es.gif" /></a></td><td valign="middle"><a href="http://res.feedsportal.com/viral/bookmark_es.cfm?title=Programando+en+iOS%3A+orientaci%C3%B3n+del+dispositivo%2C+nivel+de+bater%C3%ADa+y+otros+datos+est%C3%A1ticos&amp;link=http%3A%2F%2Fwww.genbetadev.com%2Fobjective-c-cocoa%2Fprogramando-en-ios-orientacion-del-dispositivo-nivel-de-bateria-y-otros-datos-estaticos" target="_blank"><img border="0" src="images/1111111bookmark_es.gif" /></a></td></tr></table></div><br /><br /><a href="http://da.feedsportal.com/r/121587364839/u/49/f/609642/c/33859/s/1b00176a/kg/298/a2.htm"><img border="0" src="http://da.feedsportal.com/r/121587364839/u/49/f/609642/c/33859/s/1b00176a/kg/298/a2.img" /></a><div class="feedflare">
<a href="http://feeds.weblogssl.com/~ff/genbetadev?a=4g8HtoWspyU:06Sc2sXK018:yIl2AUoC8zA"><img border="0" src="http://feeds.feedburner.com/~ff/genbetadev?d=yIl2AUoC8zA" /></a> <a href="http://feeds.weblogssl.com/~ff/genbetadev?a=4g8HtoWspyU:06Sc2sXK018:7Q72WNTAKBA"><img border="0" src="http://feeds.feedburner.com/~ff/genbetadev?d=7Q72WNTAKBA" /></a>
</div>
 </body>
</html>